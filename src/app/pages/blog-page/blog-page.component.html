<!-- Blog Page -->
<div class="blog-page">
  <div class="container">
    <!-- Blog Header -->
    <div class="blog-header">
      <h1 class="blog-title">Blog</h1>
      
      <!-- Search Bar -->
      <div class="search-container">
        <input 
          type="text" 
          class="search-input" 
          placeholder="Buscar artículos..."
          [(ngModel)]="searchTerm"
          (input)="onSearch()">
        <button class="search-btn">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>

    <div class="blog-content">
      <!-- Sidebar with Filters -->
      <aside class="blog-sidebar">
        <div class="filters-container">
          <h3 class="filters-title">Filtros de Búsqueda</h3>
          
          <!-- Date Filter -->
          <div class="filter-group">
            <label for="date-filter">Fecha</label>
            <input 
              type="month" 
              id="date-filter"
              class="filter-input"
              [(ngModel)]="selectedDate"
              (change)="onDateFilter()">
          </div>
          
          <!-- Case Type Filter -->
          <div class="filter-group">
            <label for="type-filter">Tipo de Caso</label>
            <select 
              id="type-filter"
              class="filter-select"
              [(ngModel)]="selectedCaseType"
              (change)="onTypeFilter()">
              <option value="">Todos los tipos</option>
              <option *ngFor="let type of caseTypes" [value]="type">{{ type }}</option>
            </select>
          </div>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="blog-main">
        <!-- Posts Grid -->
        <div class="posts-grid" *ngIf="!isLoading">
          <div class="post-card" *ngFor="let post of paginatedPosts">
            <div class="post-image">
              <img 
                [src]="post.imagen || 'https://images.unsplash.com/photo-1436450412740-6b988f486c6b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'" 
                [alt]="post.titulo"
                (error)="$event.target.src='https://images.unsplash.com/photo-1436450412740-6b988f486c6b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'">
              <div class="play-overlay" *ngIf="post.video">
                <i class="fas fa-play"></i>
              </div>
            </div>
            <div class="post-content">
              <h4 class="post-title">{{ post.titulo }}</h4>
              <p class="post-description">{{ truncateText(post.breveDescripcion, 120) }}</p>
              <div class="post-meta">
                <span class="post-date">{{ formatDate(post.fecha) }}</span>
                <span class="post-category">{{ post.tipoCaso }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Loading State -->
        <div class="loading-state" *ngIf="isLoading">
          <p>Cargando artículos...</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="!isLoading && paginatedPosts.length === 0 && filteredPosts.length === 0">
          <div class="empty-icon">
            <i class="fas fa-newspaper"></i>
          </div>
          <h3>No hay artículos disponibles</h3>
          <p *ngIf="!searchTerm && !selectedDate && !selectedCaseType">Aún no se han publicado artículos en el blog.</p>
          <p *ngIf="searchTerm || selectedDate || selectedCaseType">No se encontraron artículos con los filtros seleccionados.</p>
        </div>

        <!-- Pagination -->
        <div class="pagination-wrapper" *ngIf="!isLoading && totalPages > 1">
          <nav class="pagination-nav">
            <!-- Botón Previous -->
            <button 
              class="pagination-btn pagination-prev" 
              (click)="previousPage()"
              [disabled]="currentPage === 1"
              [title]="'Página anterior'">
              <i class="fas fa-chevron-left"></i>
              <span>Anterior</span>
            </button>
            
            <!-- Números de página -->
            <div class="pagination-numbers">
              <button 
                *ngFor="let page of pageNumbers"
                class="pagination-number"
                [class.active]="currentPage === page && !isEllipsis(page)"
                [class.ellipsis]="isEllipsis(page)"
                [disabled]="isEllipsis(page)"
                (click)="!isEllipsis(page) && goToPage(page)"
                [title]="!isEllipsis(page) ? 'Ir a página ' + page : ''">
                <span *ngIf="!isEllipsis(page)">{{ page }}</span>
                <span *ngIf="isEllipsis(page)">...</span>
              </button>
            </div>
            
            <!-- Botón Next -->
            <button 
              class="pagination-btn pagination-next" 
              (click)="nextPage()"
              [disabled]="currentPage === totalPages"
              [title]="'Página siguiente'">
              <span>Siguiente</span>
              <i class="fas fa-chevron-right"></i>
            </button>
          </nav>
          
          <!-- Información de página -->
          <div class="pagination-info">
            <span>Página {{ currentPage }} de {{ totalPages }}</span>
            <span class="separator">•</span>
            <span>{{ filteredPosts.length }} artículo{{ filteredPosts.length !== 1 ? 's' : '' }} en total</span>
          </div>
        </div>
      </main>
    </div>
  </div>
</div>
